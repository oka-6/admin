var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"use strict";function i(t,e){var i=e||{};for(var s in t)s in i||(i[s]=t[s]);return i}function s(t,i){if(r)r(t).trigger(i);else{var s=e.createEvent("CustomEvent");s.initCustomEvent(i,!0,!0,{}),t.dispatchEvent(s)}}function n(t,e){return r?r(t).hasClass(e):t.classList.contains(e)}function a(t,e){this.dateDelta=null,this.timeDelta=null,this._defaults={startClass:"start",endClass:"end",timeClass:"time",dateClass:"date",defaultDateDelta:0,defaultTimeDelta:36e5,anchor:"start",parseTime:function(t){return r(t).timepicker("getTime")},updateTime:function(t,e){r(t).timepicker("setTime",e)},setMinTime:function(t,e){r(t).timepicker("option","minTime",e)},parseDate:function(t){return t.value&&r(t).datepicker("getDate")},updateDate:function(t,e){r(t).datepicker("update",e)}},this.container=t,this.settings=i(this._defaults,e),this.startDateInput=this.container.querySelector("."+this.settings.startClass+"."+this.settings.dateClass),this.endDateInput=this.container.querySelector("."+this.settings.endClass+"."+this.settings.dateClass),this.startTimeInput=this.container.querySelector("."+this.settings.startClass+"."+this.settings.timeClass),this.endTimeInput=this.container.querySelector("."+this.settings.endClass+"."+this.settings.timeClass),this.refresh(),this._bindChangeHandler()}var h=864e5,r=t.Zepto||t.jQuery;a.prototype={constructor:a,option:function(t,e){if("object"==(void 0===t?"undefined":_typeof(t)))this.settings=i(this.settings,t);else if("string"==typeof t&&void 0!==e)this.settings[t]=e;else if("string"==typeof t)return this.settings[t];this._updateEndMintime()},getTimeDiff:function(){var t=this.dateDelta+this.timeDelta;return!(t<0)||this.startDateInput&&this.endDateInput||(t+=h),t},refresh:function(){if(this.startDateInput&&this.startDateInput.value&&this.endDateInput&&this.endDateInput.value){var t=this.settings.parseDate(this.startDateInput),e=this.settings.parseDate(this.endDateInput);t&&e&&(this.dateDelta=e.getTime()-t.getTime())}if(this.startTimeInput&&this.startTimeInput.value&&this.endTimeInput&&this.endTimeInput.value){var i=this.settings.parseTime(this.startTimeInput),s=this.settings.parseTime(this.endTimeInput);i&&s&&(this.timeDelta=s.getTime()-i.getTime(),this._updateEndMintime())}},remove:function(){this._unbindChangeHandler()},_bindChangeHandler:function(){r?r(this.container).on("change.datepair",r.proxy(this.handleEvent,this)):this.container.addEventListener("change",this,!1)},_unbindChangeHandler:function(){r?r(this.container).off("change.datepair"):this.container.removeEventListener("change",this,!1)},handleEvent:function(t){this._unbindChangeHandler(),n(t.target,this.settings.dateClass)?""!=t.target.value?(this._dateChanged(t.target),this._timeChanged(t.target)):this.dateDelta=null:n(t.target,this.settings.timeClass)&&(""!=t.target.value?this._timeChanged(t.target):this.timeDelta=null),this._validateRanges(),this._updateEndMintime(),this._bindChangeHandler()},_dateChanged:function(t){if(this.startDateInput&&this.endDateInput){var e=this.settings.parseDate(this.startDateInput),i=this.settings.parseDate(this.endDateInput);if(e&&i)if("start"==this.settings.anchor&&n(t,this.settings.startClass)){var s=new Date(e.getTime()+this.dateDelta);this.settings.updateDate(this.endDateInput,s)}else if("end"==this.settings.anchor&&n(t,this.settings.endClass)){var s=new Date(i.getTime()-this.dateDelta);this.settings.updateDate(this.startDateInput,s)}else if(i<e){var a=n(t,this.settings.startClass)?this.endDateInput:this.startDateInput,r=this.settings.parseDate(t);this.dateDelta=0,this.settings.updateDate(a,r)}else this.dateDelta=i.getTime()-e.getTime();else if(null!==this.settings.defaultDateDelta){if(e){var d=new Date(e.getTime()+this.settings.defaultDateDelta*h);this.settings.updateDate(this.endDateInput,d)}else if(i){var u=new Date(i.getTime()-this.settings.defaultDateDelta*h);this.settings.updateDate(this.startDateInput,u)}this.dateDelta=this.settings.defaultDateDelta*h}else this.dateDelta=null}},_timeChanged:function(t){if(this.startTimeInput&&this.endTimeInput){var e=this.settings.parseTime(this.startTimeInput),i=this.settings.parseTime(this.endTimeInput);if(!e||!i)return void(null!==this.settings.defaultTimeDelta?(this.timeDelta=this.settings.defaultTimeDelta,e?(i=this._setTimeAndReturn(this.endTimeInput,new Date(e.getTime()+this.settings.defaultTimeDelta)),this._doMidnightRollover(e,i)):i&&(e=this._setTimeAndReturn(this.startTimeInput,new Date(i.getTime()-this.settings.defaultTimeDelta)),this._doMidnightRollover(e,i))):this.timeDelta=null);if("start"==this.settings.anchor&&n(t,this.settings.startClass))i=this._setTimeAndReturn(this.endTimeInput,new Date(e.getTime()+this.timeDelta)),this._doMidnightRollover(e,i);else if("end"==this.settings.anchor&&n(t,this.settings.endClass))e=this._setTimeAndReturn(this.startTimeInput,new Date(i.getTime()-this.timeDelta)),this._doMidnightRollover(e,i);else{this._doMidnightRollover(e,i);var s,a;if(this.startDateInput&&this.endDateInput&&(s=this.settings.parseDate(this.startDateInput),a=this.settings.parseDate(this.endDateInput)),+s==+a&&i<e){var h=n(t,this.settings.endClass)?this.endTimeInput:this.startTimeInput,r=n(t,this.settings.startClass)?this.endTimeInput:this.startTimeInput,d=this.settings.parseTime(h);this.timeDelta=0,this.settings.updateTime(r,d)}else this.timeDelta=i.getTime()-e.getTime()}}},_setTimeAndReturn:function(t,e){return this.settings.updateTime(t,e),this.settings.parseTime(t)},_doMidnightRollover:function(t,e){if(this.startDateInput&&this.endDateInput){var i=this.settings.parseDate(this.endDateInput),s=this.settings.parseDate(this.startDateInput),n=e.getTime()-t.getTime(),a=e<t?h:-1*h;null!==this.dateDelta&&this.dateDelta+this.timeDelta<=h&&this.dateDelta+n!=0&&(a>0||0!=this.dateDelta)&&(n>=0&&this.timeDelta<0||n<0&&this.timeDelta>=0)&&("start"==this.settings.anchor?(this.settings.updateDate(this.endDateInput,new Date(i.getTime()+a)),this._dateChanged(this.endDateInput)):"end"==this.settings.anchor&&(this.settings.updateDate(this.startDateInput,new Date(s.getTime()-a)),this._dateChanged(this.startDateInput))),this.timeDelta=n}},_updateEndMintime:function(){if("function"==typeof this.settings.setMinTime){var t=null;"start"==this.settings.anchor&&(!this.dateDelta||this.dateDelta<h||this.timeDelta&&this.dateDelta+this.timeDelta<h)&&(t=this.settings.parseTime(this.startTimeInput)),this.settings.setMinTime(this.endTimeInput,t)}},_validateRanges:function(){return this.startTimeInput&&this.endTimeInput&&null===this.timeDelta?void s(this.container,"rangeIncomplete"):this.startDateInput&&this.endDateInput&&null===this.dateDelta?void s(this.container,"rangeIncomplete"):void(!this.startDateInput||!this.endDateInput||this.dateDelta+this.timeDelta>=0?s(this.container,"rangeSelected"):s(this.container,"rangeError"))}},t.Datepair=a}(window,document),function(t){t&&(t.fn.datepair=function(e){var i;return this.each(function(){var s=t(this),n=s.data("datepair"),a="object"==(void 0===e?"undefined":_typeof(e))&&e;n||(n=new Datepair(this,a),s.data("datepair",n)),"remove"===e&&(i=n.remove(),s.removeData("datepair",n)),"string"==typeof e&&(i=n[e]())}),i||this},t("[data-datepair]").each(function(){var e=t(this);e.datepair(e.data())}))}(window.Zepto||window.jQuery);
